package services;

import java.io.IOException;

import main.Client;
import main.Console;
import message.BytePacker;
import message.ByteUnpacker;
import message.OneByteInt;

public class RegisterCallbackService extends Service{
	
	protected final static String TIMEOUT = "timeout";
	public RegisterCallbackService(){
		super(null);
	}

	@Override
	public void executeRequest(Console console, Client client) throws IOException {
		Console.println("---------------------Registering Auto-update---------------------------------");
		
		int message_id = client.getMessage_id();	/*This should only be called once for each executeRequest as the message_id will be incremented each time  this method is called*/
		BytePacker packer = new BytePacker.Builder()
								.setProperty("ServiceId", new OneByteInt(Client.REGISTER_CALLBACK))
								.setProperty("messageId", message_id)
								.setProperty(key, value)
								.build();
		client.send(packer);
		
		//Wait for reply from server that says callback registered, then enter auto
	}
	
	

}
